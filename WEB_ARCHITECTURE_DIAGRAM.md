# MSSCS Web - Architecture Diagram

## System Overview

```
┌─────────────────────────────────────────────────────────────────┐
│                     MSSCS Web Application                       │
│                      (Vue.js 3 + Vite)                          │
└─────────────────────────────────────────────────────────────────┘
                              │
                              │
        ┌─────────────────────┼─────────────────────┐
        │                     │                     │
        ▼                     ▼                     ▼
┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│   Browser    │    │  Shared      │    │  Web-Specific│
│   Runtime    │    │  Components  │    │  Code        │
└──────────────┘    └──────────────┘    └──────────────┘
        │                     │                     │
        │                     │                     │
        ▼                     ▼                     ▼
┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│  IndexedDB   │    │  Vue.js      │    │  Node Store  │
│  Storage     │    │  Components  │    │  (Pinia)     │
└──────────────┘    └──────────────┘    └──────────────┘
        │                     │                     │
        └─────────────────────┴─────────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │   P2P Network    │
                    │   (PeerJS)       │
                    └──────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │   WebRTC         │
                    │   STUN/TURN      │
                    └──────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │   Internet       │
                    │   (Global P2P)   │
                    └──────────────────┘
```

## Component Sharing Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                    msscs_client (Desktop)                       │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐  │
│  │  src/                                                     │  │
│  │  ├── components/                                         │  │
│  │  │   ├── DashboardView.vue  ◄───────────────┐          │  │
│  │  │   ├── FilesView.vue      ◄───────────┐   │          │  │
│  │  │   ├── SyncView.vue       ◄───────┐   │   │          │  │
│  │  │   ├── PeersView.vue      ◄───┐   │   │   │          │  │
│  │  │   ├── SettingsView.vue   ◄─┐ │   │   │   │          │  │
│  │  │   └── ... (all others)     │ │   │   │   │          │  │
│  │  └── styles/                  │ │   │   │   │          │  │
│  │      └── main.css  ◄──────────┼─┼───┼───┼───┼──┐       │  │
│  └─────────────────────────────┼─┼─┼───┼───┼───┼──┼───────┘  │
└────────────────────────────────┼─┼─┼───┼───┼───┼──┼───────────┘
                                 │ │ │   │   │   │  │
                    Shared via   │ │ │   │   │   │  │
                    Vite Aliases │ │ │   │   │   │  │
                                 │ │ │   │   │   │  │
┌────────────────────────────────┼─┼─┼───┼───┼───┼──┼───────────┐
│                    msscs_web (Browser)                         │
│                                │ │ │   │   │   │  │           │
│  ┌─────────────────────────────┼─┼─┼───┼───┼───┼──┼───────┐  │
│  │  src/                       │ │ │   │   │   │  │       │  │
│  │  ├── App.vue                │ │ │   │   │   │  │       │  │
│  │  │   Imports: ──────────────┘ │ │   │   │   │  │       │  │
│  │  │   - DashboardView ─────────┘ │   │   │   │  │       │  │
│  │  │   - FilesView ───────────────┘   │   │   │  │       │  │
│  │  │   - SyncView ───────────────────┘   │   │  │       │  │
│  │  │   - PeersView ──────────────────────┘   │  │       │  │
│  │  │   - SettingsView ───────────────────────┘  │       │  │
│  │  ├── main.js                                   │       │  │
│  │  ├── stores/                                   │       │  │
│  │  │   └── nodeStore.js                          │       │  │
│  │  └── styles/                                   │       │  │
│  │      └── main.css  ────────────────────────────┘       │  │
│  │          @import '@shared/styles/main.css'             │  │
│  └─────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
```

## Status Transition Flow

```
┌─────────────────────────────────────────────────────────────────┐
│                      Application Start                          │
└────────────────────────────┬────────────────────────────────────┘
                             │
                             ▼
                    ┌─────────────────┐
                    │  Status: OFFLINE│
                    │  (Initial State)│
                    └────────┬─────────┘
                             │
                             │ Initialize P2P
                             ▼
                    ┌─────────────────┐
                    │ Status: SYNCING │
                    │ (Connecting...) │
                    └────────┬─────────┘
                             │
                             │ P2P Connected
                             │ + Peer ID Received
                             ▼
                    ┌─────────────────┐
                    │ Status: ONLINE  │◄──┐
                    │ (Ready! ✅)     │   │
                    └────────┬─────────┘   │
                             │             │
                             │ Metrics     │
                             │ Polling     │
                             │ (Every 5s)  │
                             └─────────────┘
                             │
                             │ Connection Lost
                             ▼
                    ┌─────────────────┐
                    │ Status: OFFLINE │
                    │ (Disconnected)  │
                    └─────────────────┘
```

## Data Flow

```
┌─────────────────────────────────────────────────────────────────┐
│                         User Action                             │
│                    (Upload File, Connect Peer)                  │
└────────────────────────────┬────────────────────────────────────┘
                             │
                             ▼
                    ┌─────────────────┐
                    │   Vue Component │
                    │   (UI Layer)    │
                    └────────┬─────────┘
                             │
                             ▼
                    ┌─────────────────┐
                    │   Node Store    │
                    │   (State Mgmt)  │
                    └────────┬─────────┘
                             │
                ┌────────────┼────────────┐
                │            │            │
                ▼            ▼            ▼
        ┌──────────┐  ┌──────────┐  ┌──────────┐
        │  P2P     │  │ Storage  │  │  Crypto  │
        │ Network  │  │ Manager  │  │ Manager  │
        └────┬─────┘  └────┬─────┘  └────┬─────┘
             │             │             │
             │             ▼             │
             │      ┌──────────────┐    │
             │      │  IndexedDB   │    │
             │      │  (Browser)   │    │
             │      └──────────────┘    │
             │                          │
             │      ┌──────────────┐    │
             └─────►│   WebRTC     │◄───┘
                    │   (P2P)      │
                    └──────┬───────┘
                           │
                           ▼
                    ┌──────────────┐
                    │   Internet   │
                    │   (Peers)    │
                    └──────────────┘
```

## Vite Configuration

```
┌─────────────────────────────────────────────────────────────────┐
│                      vite.config.js                             │
└─────────────────────────────────────────────────────────────────┘
                             │
                             ▼
                    ┌─────────────────┐
                    │  Path Aliases   │
                    └────────┬─────────┘
                             │
                ┌────────────┼────────────┐
                │                         │
                ▼                         ▼
        ┌──────────────┐          ┌──────────────┐
        │  @           │          │  @shared     │
        │  (src/)      │          │  (../client) │
        └──────────────┘          └──────────────┘
                │                         │
                │                         │
                ▼                         ▼
        ┌──────────────┐          ┌──────────────┐
        │  Web-Specific│          │  Shared      │
        │  Components  │          │  Components  │
        └──────────────┘          └──────────────┘
                │                         │
                └────────────┬────────────┘
                             │
                             ▼
                    ┌─────────────────┐
                    │  Vue App        │
                    │  (Unified UI)   │
                    └─────────────────┘
```

## P2P Network Topology

```
                    ┌──────────────┐
                    │  PeerJS      │
                    │  Signaling   │
                    │  Server      │
                    └──────┬───────┘
                           │
            ┌──────────────┼──────────────┐
            │              │              │
            ▼              ▼              ▼
    ┌──────────────┐ ┌──────────────┐ ┌──────────────┐
    │  Web Client  │ │  Desktop     │ │  Mobile      │
    │  (Browser)   │ │  (Tauri)     │ │  (Capacitor) │
    └──────┬───────┘ └──────┬───────┘ └──────┬───────┘
           │                │                │
           │    WebRTC      │    WebRTC      │
           │    Direct      │    Direct      │
           │    Connection  │    Connection  │
           └────────┬───────┴────────┬───────┘
                    │                │
                    ▼                ▼
            ┌──────────────┐  ┌──────────────┐
            │  STUN Server │  │  TURN Server │
            │  (NAT Type)  │  │  (Relay)     │
            └──────────────┘  └──────────────┘
```

## Storage Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                      Browser Storage                            │
└─────────────────────────────────────────────────────────────────┘
                             │
                ┌────────────┼────────────┐
                │            │            │
                ▼            ▼            ▼
        ┌──────────┐  ┌──────────┐  ┌──────────┐
        │IndexedDB │  │LocalStore│  │ Memory   │
        │(Blocks)  │  │(Config)  │  │(Cache)   │
        └────┬─────┘  └────┬─────┘  └────┬─────┘
             │             │             │
             │             │             │
             └─────────────┼─────────────┘
                           │
                           ▼
                  ┌─────────────────┐
                  │  Storage Manager│
                  └────────┬─────────┘
                           │
                ┌──────────┼──────────┐
                │          │          │
                ▼          ▼          ▼
        ┌──────────┐ ┌──────────┐ ┌──────────┐
        │  Files   │ │  Blocks  │ │Metadata  │
        │  (List)  │ │  (Data)  │ │  (Info)  │
        └──────────┘ └──────────┘ └──────────┘
```

## Encryption Pipeline

```
┌─────────────────────────────────────────────────────────────────┐
│                      File Upload                                │
└────────────────────────────┬────────────────────────────────────┘
                             │
                             ▼
                    ┌─────────────────┐
                    │  File Data      │
                    │  (Plain)        │
                    └────────┬─────────┘
                             │
                             ▼
                    ┌─────────────────┐
                    │  Chunk (256KB)  │
                    └────────┬─────────┘
                             │
                             ▼
        ┌────────────────────────────────────────┐
        │       7-Layer Quantum Encryption       │
        ├────────────────────────────────────────┤
        │  1. ML-KEM-1024 (Kyber)               │
        │  2. ML-DSA-87 (Dilithium)             │
        │  3. AES-256-GCM                       │
        │  4. ChaCha20-Poly1305                 │
        │  5. Lattice-based Noise               │
        │  6. Superposition Key Derivation      │
        │  7. Singularity Fragmentation         │
        └────────────────┬───────────────────────┘
                         │
                         ▼
                ┌─────────────────┐
                │  Encrypted Block│
                │  (2^832 secure) │
                └────────┬─────────┘
                         │
                         ▼
                ┌─────────────────┐
                │  Store Locally  │
                │  + Replicate    │
                └─────────────────┘
```

## Development Workflow

```
┌─────────────────────────────────────────────────────────────────┐
│                    Developer Makes Change                       │
└────────────────────────────┬────────────────────────────────────┘
                             │
                ┌────────────┼────────────┐
                │                         │
                ▼                         ▼
        ┌──────────────┐          ┌──────────────┐
        │  Shared      │          │  Web-Specific│
        │  Component   │          │  Code        │
        │  (client/)   │          │  (web/src/)  │
        └──────┬───────┘          └──────┬───────┘
               │                         │
               │                         │
               ▼                         ▼
        ┌──────────────┐          ┌──────────────┐
        │  Vite HMR    │          │  Vite HMR    │
        │  (Desktop)   │          │  (Web)       │
        └──────┬───────┘          └──────┬───────┘
               │                         │
               │                         │
               ▼                         ▼
        ┌──────────────┐          ┌──────────────┐
        │  Desktop     │          │  Browser     │
        │  Updates     │          │  Updates     │
        │  Instantly   │          │  Instantly   │
        └──────────────┘          └──────────────┘
```

## Legend

```
┌──────────┐
│  Box     │  = Component/Module
└──────────┘

    │
    ▼         = Data Flow

    ◄──       = Import/Reference

┌──────────┐
│  ✅      │  = Success State
└──────────┘

┌──────────┐
│  ❌      │  = Error State
└──────────┘
```

---

**This architecture enables:**
- ✅ Component reusability across platforms
- ✅ Unified design system
- ✅ Proper status transitions
- ✅ Fast development with HMR
- ✅ Secure P2P networking
- ✅ Quantum-resistant encryption
